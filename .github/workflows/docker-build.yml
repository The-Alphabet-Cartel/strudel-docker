# Build Dependencies Note

## Native Module Dependencies

Strudel requires native modules (tree-sitter, tree-sitter-haskell) that need to be compiled during installation. These require:

- Python 3
- make
- g++ (C++ compiler)
- git

The updated Dockerfile now includes these dependencies.

## If You See Python/node-gyp Errors

If you see errors like:
```
gyp ERR! find Python
gyp ERR! stack Error: Could not find any Python installation to use
```

This means the Docker image doesn't have the build tools installed. The updated Dockerfile fixes this by installing:

```dockerfile
RUN apt-get update && apt-get install -y \
    python3 \
    make \
    g++ \
    git \
    && rm -rf /var/lib/apt/lists/*
```

## Image Size Impact

Adding build dependencies increases the image size:
- Base node:20-slim: ~200 MB
- With build tools: ~450-500 MB

This is necessary for Strudel's native dependencies to compile correctly.

## Alternative: Pre-built Binaries

Once the GitHub Actions workflow builds and publishes the image with these dependencies, you can use the pre-built image which will already have everything compiled:

```yaml
image: ghcr.io/the-alphabet-cartel/strudel-docker:latest
```

This avoids needing to build anything locally.